{% load product_tags %}
{% load humanize %}
{% load base %}
<div class="content">
                        <div class="row">
                            <div class="col-12 col-lg-9">
                                <div id="cart-products">
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-12 py-3">
                                                <div class="pb-3" id="return-to-shop">می‌خواهید محصولات دیگری اضافه
                                                    کنید؟ <a href="products.html">بازگشت به فروشگاه</a></div>
                                                <div id="products-cont" class="d-none d-md-block">
                                                    <div class="row my-2" id="heading">
                                                        <div class="col-4">
                                                            <div>کالا</div>
                                                        </div>
                                                        <div class="col-2">
                                                            <div>قیمت واحد</div>
                                                        </div>
                                                        <div class="col-2 pl-4">
                                                            <div>تعداد</div>
                                                        </div>
                                                        <div class="col-2">
                                                            <div>تخفیف</div>
                                                        </div>
                                                        <div class="col-2 pr-0">
                                                            <div class="pr-3">قیمت نهایی</div>
                                                        </div>
                                                    </div>
                                                </div>

                                                {% for item in cart %}
                                                    <div class="row product">
                                                        <div class="col-12 col-md-4">
                                                            <div class="row">
                                                                <div class="col-2 col-md-4 pl-0">
                                                                    <img src="{{ item.product|product_main_image }}"
                                                                         alt={{ item.product.title }}"">
                                                                </div>
                                                                <div class="col-10 col-md-8">
                                                                    <a href="{% url 'ProductsApp:product_detail' item.product.id %}"
                                                                       target="_blank">
                                                                        <div class="title pt-2">{{ item.product.title }}<span
                                                                                class="btn border border-3 rounded-circle"
                                                                                style="background-color: {{ item.color }}"></span>
                                                                        </div>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-6 col-md-2">
                                                            <div class="d-md-none font-weight-bold">قیمت</div>
                                                            <div class="pt-1"><span
                                                                    class="product-encode4365gbf265g43d">{{ item.product.price|intcomma:False }}</span>
                                                                <span>تومان</span></div>
                                                        </div>
                                                        <div class="col-6 col-md-2 pl-4 pr-0 pr-md-3">
                                                            <div class="d-md-none font-weight-bold">تعداد</div>
                                                            <div class="input-group mb-3 order-number">
                                                                <div class="input-group-prepend">
                                                                    <button class="btn btn-outline-secondary btn-plus"
                                                                            type="button">+
                                                                    </button>
                                                                </div>
                                                                <input type="text" name="order-number[]"
                                                                       value="{{ item.quantity }}"
                                                                       class="form-control text-center order-number"
                                                                       readonly>
                                                                <div class="input-group-prepend">
                                                                    <button class="btn btn-outline-secondary btn-minus"
                                                                            type="button">_
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-6 col-md-2">
                                                            <div class="d-md-none font-weight-bold">تخفیف</div>
                                                            <div class="pt-1"><span
                                                                    class="product-discount"></span>{{ item.product.off_price|multiply:item.quantity|intcomma:False }}<span>تومان</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-6 col-md-2 pr-0">
                                                            <div class="d-md-none font-weight-bold">قیمت نهایی</div>
                                                            <div class="pt-1 pr-2 bg-light"><span
                                                                    class="product-total">{{ item.product.final_price|multiply:item.quantity|intcomma:False }}</span>
                                                                <span>تومان</span></div>
                                                            <a onclick="removeProduct()" class="product-remove btn-remove-from-basket w-auto send-reply"
                                                               data-product-id="{{ item.product.id }}" data-color-id="{{ item.color_id }}">
                                                                <div class="small pl-2"><i class="fa fa-times"></i> حذف
                                                                </div>
                                                            </a>
                                                        </div>
                                                    </div>
                                                {% empty %}
                                                    <div class="col-12 alert alert-warning">محصولی در سبد خرید شما وجود
                                                        ندارد.
                                                    </div>
                                                {% endfor %}

                                                <div class="row">
                                                    <div class="col-12">
                                                        <a onclick="emptyCart()"
                                                           class="product-remove btn-remove-from-basket send-reply"
                                                           data-id="all">
                                                            <div class="float-end small pl-2 font-weight-bold">خالی کردن
                                                                سبد
                                                            </div>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-lg-3 mt-2 mt-lg-0 pr-3 pr-lg-0">
                                <div id="factor">
                                    <div class="container">
                                        <div class="row py-2">
                                            <div class="col-6">
                                                <div>جمع کل فاکتور:</div>
                                            </div>
                                            <div class="col-6">
                                                <div><span
                                                        id="factor-total-encode4365gbf265g43d">{{ cart.get_final_price|default:0 }}</span>
                                                    تومان
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row py-2">
                                            <div class="col-6">
                                                <div>جمع قیمت محصولات:</div>
                                            </div>
                                            <div class="col-6">
                                                <div><span
                                                        id="factor-total-encode4365gbf265g43d">{{ cart.get_products_price|default:0 }}</span>
                                                    تومان
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row py-2">
                                            <div class="col-6">
                                                <div>هزینه ی ارسال:</div>
                                            </div>
                                            <div class="col-6">
                                                <div><span
                                                        id="factor-total-encode4365gbf265g43d">{{ cart.get_post_price|intcomma:False|default:0 }}</span>
                                                    تومان
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row py-2 bg-light">
                                            <div class="col-6">
                                                <div>جمع تخفیف:</div>
                                            </div>
                                            <div class="col-6">
                                                <div><span class="text-danger"
                                                           id="factor-total-discount">{{ cart.get_off_price|intcomma:False|default:0 }}</span>
                                                    تومان
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row py-2" id="total">
                                            <div class="col-6">
                                                <div>مبلغ قابل پرداخت:</div>
                                            </div>
                                            <div class="col-6">
                                                <div><span
                                                        id="factor-total">{{ cart.get_payable_price|intcomma:False|default:0 }}</span>
                                                    تومان
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row py-2">
                                            <div class="col-12">
                                                <a href="checkout.html"><input type="submit" value="ادامه ثبت سفارش"
                                                                               class="btn btn-success w-100"></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>